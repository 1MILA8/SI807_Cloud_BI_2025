# IAM
## IAM GRANULAR POR USUARIO
### Rol Integrante 1
<img width="500" height="600" alt="image" src="https://github.com/user-attachments/assets/bee8bfef-31eb-48b7-9c20-dc373cd67876" />

<img width="500" height="600" alt="image" src="https://github.com/user-attachments/assets/214dcbaa-9f7e-4c8c-8342-9648a143e7f3" />

<img width="500" height="600" alt="image" src="https://github.com/user-attachments/assets/c0a6a860-dfa5-4701-bb67-03af9244139b" />
<img width="500" height="600" alt="image" src="https://github.com/user-attachments/assets/7a5fc8e8-201c-410a-b114-17a3ac55d34e" />

### Rol Integrante 2

<img width="500" height="600" alt="image" src="https://github.com/user-attachments/assets/2e231213-0967-4d6b-a29f-5d1b4141c0bd" />

<img width="500" height="600" alt="image" src="https://github.com/user-attachments/assets/db33212e-357c-410c-9546-748774cecd33" />

<img width="600" height="600" alt="image" src="https://github.com/user-attachments/assets/d221935c-d737-49da-8762-ee1cd74e07a9" />

<img width="600" height="80" alt="image" src="https://github.com/user-attachments/assets/4ea1275b-07d3-433f-803f-4299036938cf" />

## IAM GRANULAR POR SERVICIO (SERVICE ACCOUNT)

### CLUSTERES DATAPROC

<img width="600" height="55" alt="image" src="https://github.com/user-attachments/assets/ec9a5dd2-082d-4cf2-b2f5-a0633f008044" />

<img width="600" height="366" alt="image" src="https://github.com/user-attachments/assets/7ecfb0ee-b005-41e3-80d4-a2ad66f88389" />

<img width="600" height="415" alt="image" src="https://github.com/user-attachments/assets/74707950-68be-4abb-8154-9d30727f5546" />

<img width="600" height="49" alt="image" src="https://github.com/user-attachments/assets/1906de86-8052-4338-9bf3-5d9a838b7c3f" />


### COMPOSER

<img width="600" height="62" alt="image" src="https://github.com/user-attachments/assets/57141f46-8de2-4379-816f-6508c2171156" />

<img width="600" height="461" alt="image" src="https://github.com/user-attachments/assets/86c02821-84fd-4c89-9b86-6e3cade55e7d" />

<img width="600" height="107" alt="image" src="https://github.com/user-attachments/assets/6a8ea9b5-81e1-46ee-94f6-c9d59f51ed56" />

<img width="600" height="511" alt="image" src="https://github.com/user-attachments/assets/bb074b0f-49c7-441e-a192-eaa097cab5c2" />

<img width="600" height="76" alt="image" src="https://github.com/user-attachments/assets/c9e3921a-1393-4181-a287-4f3de5d3388a" />


## Políticas almacenadas en un archivo json por consola para auditoría y versionamiento

<img width="600" height="43" alt="image" src="https://github.com/user-attachments/assets/14c4c499-3951-4b10-b2d7-5cc0fc395a68" />

<img width="600" height="595" alt="image" src="https://github.com/user-attachments/assets/aba0a07a-bf06-40aa-8f46-d96233a1ad07" />

## VPC PERSONALIZADAS: SUBREDES PÚBLICAS / PRIVADAS

### Crear VPC

<img width="600" height="217" alt="image" src="https://github.com/user-attachments/assets/f979a24c-55b5-49a1-957a-72eb72b40b25" />

### Crear Subred Pública
<img width="600" height="156" alt="image" src="https://github.com/user-attachments/assets/814f669f-2cc6-4c5d-b2bc-4cf4e23358a2" />

### Crear Subred Privada

<img width="600" height="163" alt="image" src="https://github.com/user-attachments/assets/134a52be-1bc3-4aeb-a014-02ae0ef1631a" />

### Configurar Cloud NAT para que instancias privadas tengan salida

<img width="600" height="108" alt="image" src="https://github.com/user-attachments/assets/1c336401-babe-4d53-8e20-94ecf14f8375" />

### Firewalls configurados por puertos/servicios

Permitir SSH solo desde rango de administración y permitir puerto 443

<img width="600" height="348" alt="image" src="https://github.com/user-attachments/assets/85786399-f049-4575-a231-ea0204fa979c" />

## Cifrado en tránsito y en reposo con llaves manejadas

Llavero de claves multi-regional creada por interfaz:

<img width="600" height="44" alt="image" src="https://github.com/user-attachments/assets/39a9daa1-18db-494f-a332-887832502c9c" />

Creación de Clave:

<img width="300" height="514" alt="image" src="https://github.com/user-attachments/assets/88307ec8-9e2c-4da9-a77f-71c45f0fbca9" />

<img width="600" height="103" alt="image" src="https://github.com/user-attachments/assets/c99a4e38-d248-4b0f-ba7e-3d7af8282594" />


## CONFIGURANDO EN LOS SERVICES ACCOUNTS LAS CLAVES

Agente de Servicio de GCS (El Cifrador del Bucket)

<img width="600" height="186" alt="image" src="https://github.com/user-attachments/assets/1ee155e1-4513-497d-96ef-c471b3ce84e7" />

Cuenta de Servicio de Dataproc (El Actor ETL)

<img width="600" height="203" alt="image" src="https://github.com/user-attachments/assets/da21ddad-2d25-4d8b-bfdb-a80cf5294f36" />

Auditoría activa (Cloud Audit Logs)

Admin activity:

<img width="600" height="19" alt="image" src="https://github.com/user-attachments/assets/6fcaa24a-1b8b-4492-939e-5d2916001bcc" />

# GOOGLE CLOUD STORAGE (GCS)

CREACIÓN DE BUCKETS:
Todas las creaciones de buckets se consideran multi-region y además cifrado en reposo.

- RAW

<img width="250" height="245" alt="image" src="https://github.com/user-attachments/assets/aed61475-53d5-40f5-87c4-c0fa84796d79" />

<img width="433" height="177" alt="image" src="https://github.com/user-attachments/assets/4c7dd7c3-2695-405d-9cfa-9cab47eb8127" />

- TRUSTED

<img width="276" height="272" alt="image" src="https://github.com/user-attachments/assets/aac6c7e7-41ef-4855-804a-c36a41e2e8d7" />

<img width="490" height="250" alt="image" src="https://github.com/user-attachments/assets/76e4d29e-4fc3-4ae0-aade-f594fefd1021" />

- REFINED
<img width="371" height="277" alt="image" src="https://github.com/user-attachments/assets/bd4558a4-1773-49b4-b4a3-908f75bd09a5" />

<img width="480" height="192" alt="image" src="https://github.com/user-attachments/assets/345a3f60-45a3-408d-a13a-08792fadb7e4" />

## ESTRUCTURA COMPLETA:

<img width="886" height="75" alt="image" src="https://github.com/user-attachments/assets/f6e648d4-1d09-44da-bc9b-12f0dff44106" />


## Habilitar Versionamiento, solo RAW:

Porque es la zona de aterrizaje de los datos, donde se necesita auditoría y gestión de copias de seguridad.
Al habilitar esto, se cumple con el requisito de que si el sistema de origen sube un archivo CSV con el mismo nombre varias veces, no se perderá la versión anterior del archivo.

<img width="886" height="46" alt="image" src="https://github.com/user-attachments/assets/298014ba-7355-456a-a138-183b3ec99223" />

## Configurar Reglas de Ciclo de Vida:
Las reglas de ciclo de vida permiten automatizar la gestión de costos y el control de retención al cambiar la clase de almacenamiento o eliminar versiones antiguas.
Usaremos las siguientes reglas:
- Degradar la clase de almacenamiento: Las versiones no actuales (las versiones antiguas) se moverán a NEARLINE después de 30 días para reducir costos.
- Eliminar versiones antiguas: Las versiones no actuales serán eliminadas por completo después de 365 días.

<img width="886" height="25" alt="image" src="https://github.com/user-attachments/assets/4aaaa592-cdbb-4ad2-8880-58c6d7fb92fa" />

<img width="691" height="462" alt="image" src="https://github.com/user-attachments/assets/d9e21b37-f371-4a44-a5d1-cd8c94ff018f" />

<img width="886" height="35" alt="image" src="https://github.com/user-attachments/assets/a889c1d4-810e-483f-8ea3-5b0e9ed14ac5" />

## Habilitar Logs de Acceso a Datos

<img width="886" height="101" alt="image" src="https://github.com/user-attachments/assets/734437e8-97db-407d-ae01-d7c3b59b6589" />

## Upload automatizado con CLI

<img width="230" height="500" alt="image" src="https://github.com/user-attachments/assets/2c20af5b-a777-4971-9943-d94fda15f2d0" />

Se esta usando Cloud Shell como un puente para simular el servidor de origen de los datos.
simulando que se encuentran en el SFTP.

<img width="700" height="700" alt="image" src="https://github.com/user-attachments/assets/e05303c9-d638-4d2f-9fd9-413f0c86e62f" />

<img width="500" height="240" alt="image" src="https://github.com/user-attachments/assets/e627ddcb-020a-446f-b3de-6ed84591c507" />

# Limpieza de datos con metricas

## Uso de Jupiter Notebook
<img width="1919" height="1079" alt="image" src="https://github.com/user-attachments/assets/672eb8c0-2699-42e8-9661-e52b450a9072" />
## Vista de Métricas con Pandas
<img width="1577" height="681" alt="image" src="https://github.com/user-attachments/assets/265facf9-beb3-443d-8753-88a08079f196" />
## Data Limpia Subida al Trusted
<img width="1910" height="742" alt="image" src="https://github.com/user-attachments/assets/4ac4170f-28b1-433d-8a71-ba8f95283df2" />
## Carga de datos a tablas
<img width="1246" height="404" alt="image" src="https://github.com/user-attachments/assets/06ddbb56-e685-4632-b88b-acf9e815acfd" />
## Cambio de nombres a tablas
<img width="1151" height="406" alt="image" src="https://github.com/user-attachments/assets/da974216-9e5c-4693-b4b1-537f7100f071" />
## Prueba de Querys
<img width="1462" height="739" alt="image" src="https://github.com/user-attachments/assets/2a573f29-aa7c-4c37-947a-471d2886700b" />


























